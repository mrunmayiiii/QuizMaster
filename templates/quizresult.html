{% extends "index.html" %}

{% block content %}
<nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #2D336B;">
    <a class="navbar-brand fw-bold" href="/user">{{ user.fullname }}</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
</nav>

<div class="container mt-4">
    <div class="row">
        <div class="col-md-12">
            <div class="card shadow-lg mb-4 border-0">
                <div class="card-header text-white" style="background-color: #2D336B;">
                    <h4 class="mb-0">Quiz Results</h4>
                </div>
                <div class="card-body text-center">
                    <h3 class="mb-4">Your Score: <span class="fw-bold">{{ score }}/{{ total }}</span></h3>
                    
                    {% set percentage = (score / total * 100)|round %}
                    
                    <div class="progress mb-4" style="height: 30px;">
                        <div class="progress-bar {% if percentage >= 70 %}bg-success{% elif percentage >= 40 %}bg-warning{% else %}bg-danger{% endif %}" 
                             role="progressbar" style="width: {{ percentage }}%;" 
                             aria-valuenow="{{ percentage }}" aria-valuemin="0" aria-valuemax="100">
                            {{ percentage }}%
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        {% if percentage >= 70 %}
                            <div class="alert alert-success" role="alert">
                                <h4 class="alert-heading">Excellent!</h4>
                                <p>You've done a great job on this quiz.</p>
                            </div>
                        {% elif percentage >= 40 %}
                            <div class="alert alert-warning" role="alert">
                                <h4 class="alert-heading">Good effort!</h4>
                                <p>You're on the right track, but there's room for improvement.</p>
                            </div>
                        {% else %}
                            <div class="alert alert-danger" role="alert">
                                <h4 class="alert-heading">Needs improvement</h4>
                                <p>Consider reviewing the material and trying again.</p>
                            </div>
                        {% endif %}
                    </div>
                    
                    <div class="d-grid gap-2 d-md-flex justify-content-md-center mt-4">
                        <a href="/user" class="btn text-white" style="background-color: #2D336B;">
                            <i class="bi bi-arrow-left"></i> Back to Dashboard
                        </a>
                        <a href="/quizrandom/{{ quiz_id if quiz_id is defined else 0 }}" class="btn text-white" style="background-color: #2D336B;">
                            <i class="bi bi-arrow-repeat"></i> Try Again
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}